<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>GPS sample</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">	
	<!-- a2hs ios -->
		<!-- アドレスバー等のブラウザのUIを非表示 -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<!-- default（Safariと同じ） / black（黒） / black-translucent（ステータスバーをコンテンツに含める） -->
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!-- ホーム画面に表示されるアプリ名 -->
		<meta name="apple-mobile-web-app-title" content="GPS sam">
		<!-- ホーム画面に表示されるアプリアイコン -->
		<link rel="apple-touch-icon" href="img/icon-152x152.png">
	<!-- a2hs android -->
		<!-- ウェブアプリマニフェストの読み込み -->
		<link rel="manifest" href="manifest.webmanifest">
		<!-- ServiceWorkerの登録 -->
		<script>
		if ('serviceWorker' in navigator) {
		    navigator.serviceWorker.register('/gps_1/service_worker.js')
		      .then((reg) => {
		        console.log('Service worker registered.', reg);
		      });
		}
		</script>

	<script>
		// GPS値取得
		function geo_get() {
		    navigator.geolocation.getCurrentPosition(geo_detail);
		}
		// GPS詳細
		function geo_detail(position) {
			
		    var geo_text = "緯度:" + position.coords.latitude + "\n";
		    geo_text += "経度:" + position.coords.longitude + "\n";
		    geo_text += "高度:" + position.coords.altitude + "\n";
		    geo_text += "位置精度:" + position.coords.accuracy + "\n";
		    geo_text += "高度精度:" + position.coords.altitudeAccuracy  + "\n";
		    geo_text += "移動方向:" + position.coords.heading + "\n";
		    geo_text += "速度:" + position.coords.speed + "\n";
			
		    var date = new Date(position.timestamp);
			
		    geo_text += "取得時刻:" + date.toLocaleString() + "\n";
			
		    document.getElementById('geo_id').innerText= geo_text;
		}
	</script>

</head>
<body>
	<button onclick="geo_get()">今どこ？</button>
	<div id='geo_id'>場所</div>
</body>
</html>
